#!/usr/bin/env bash
#
# Setup script for vib on remote machines
# Adds openpr and curs aliases to ~/.bashrc and ~/.zshrc
#

VIB_MARKER="# vib aliases"
ALIASES='
# vib aliases
alias openpr="vib openpr"
alias curs="vib curs"
'

add_aliases() {
    local rc_file="$1"
    if [[ -f "$rc_file" ]] || [[ "$2" == "create" ]]; then
        if grep -q "$VIB_MARKER" "$rc_file" 2>/dev/null; then
            echo "vib aliases already installed in $rc_file"
        else
            echo "$ALIASES" >> "$rc_file"
            echo "Added vib aliases to $rc_file"
        fi
    fi
}

# Add to both bashrc and zshrc
add_aliases "$HOME/.bashrc" create
add_aliases "$HOME/.zshrc"

echo "Run 'source ~/.bashrc' or start a new shell to use them"
